{% extends 'base.html' %}

{% block title %}
    Force Creator
{% endblock title %}

{% block content %}
    
    <!-- <div class='container-fluid min-vh-100 bg-primary'>
        <div class='collapse container min-vh-100 p-0 bg-secondary border border-2 border-top-0 border-bottom-0 border-info' id='main-area'> -->
            
            <!-- HEADER -->
            <div class='container-fluid border border-5 border-start-0 border-end-0 border-secondary bg-warning'>
                <h1 class='main_header m-1 text-center'>
                    <i>Blood & Plunder Force Creator</i>
                </h1>
            </div>

            <div class='container p-0 px-1 m-0'>
                
                <!-- MAIN SELECT  -->
                <div class='container-fluid rounded-3 bg-warning p-0 fell fs-5'>

                    <div class='row px-3'>
                        
                        <!-- MAIN SELECT RIGHT SIDE -->
                        <div class='col-12-sm col-md order-md-last m-1'>      

                            <div class='row mt-1'>
                                <div class='col-auto p-0 pe-2 text-end'>
                                    <i class='form-label text-info'>Nation:</i>
                                </div>
                                <div class='col p-0'>
                                    <select class='form-control rounded-2 text-center pt-0 pb-0 border bg-info border-2 border-secondary text-primary' id='select_nation'></select>
                                </div>
                            </div>
                                          
                            <div class='row mt-1'>
                                <div class='col-auto p-0 pe-2 text-end'>
                                    <i class='form-label text-info'>Faction:</i>
                                </div>
                                <div class='col p-0'>
                                    <select class='form-control rounded-2 text-center pt-0 pb-0 bg-info border border-2 border-secondary text-primary' id='select_faction'></select>
                                </div>
                            </div>

                            <div class='row mt-1'>
                                <div class='col-auto p-0 pe-2 text-end'>
                                    <i class='form-label text-info'>Commander:</i>
                                </div>
                                <div class='col p-0'>
                                    <select class='form-control rounded-2 text-center pt-0 pb-0 bg-info border border-2 border-secondary text-primary' id='select_commander'></select>
                                </div>
                            </div>
                        </div>                        

                        <!-- MAIN SELECT LEFT SIDE -->
                        <div class='col m-1'>
                            <!-- FORCE NAME -->
                            <div class='row mt-1 align-items-center'>
                                <div class='col-auto p-0 pe-2 text-end'>
                                    <i class='form-label text-info'>Force Name:</i>
                                </div>
                                <div class='col p-0'>
                                    <input type='text' placeholder='Name Your Force' class='form-control rounded-2 text-center pt-0 pb-0 bg-info border border-2 border-secondary text-primary' id='force_name'>
                                </div>
                            </div>
                            <!-- MAX POINTS -->
                            <div class='row align-items-center'>
                                <div class='col-auto mt-1 p-0 pe-2 text-end'>
                                    <i class='form-label text-info'>Max Points:</i>
                                </div>
                                <div class='col-3 col-1-sm mt-1 p-0'>
                                    <input type='number' value=150 class='form-control rounded-2 text-center pt-0 pb-0 bg-info border border-2 border-secondary text-primary' id='point_max'>
                                </div>
                                <div class='col-auto mt-1'>
                                    <span class='px-1 rounded-2 text-info border border-primary'>
                                        <span id='point-total-display'>0</span>
                                        &nbsp;/&nbsp;
                                        <span id='point-max-display'>150</span>
                                    </span>
                                </div>
                                <div class='col-auto mt-1'>
                                    <i  class='p-1 border border-primary rounded-2 text-info fs-6'>
                                        Models in Force: <span class='fs-5' id='model-count'>-</span>
                                    </i>
                                </div>
                            </div>
                            <!-- THIRD ROW -->
                            <div class='row mt-1 align-items-center'>
                                <div class='col-auto mt-lg-1'>
                                    <span  class='p-1 border border-primary rounded-2 text-info fs-6' id='unit-size-range-display'>
                                        <!-- filled by js -->
                                    </span>
                                </div>
                                <div class='col-auto mt-1'>
                                    <i  class='p-1 border border-primary rounded-2 text-info fs-6'>
                                        Strike Points At: <span class='fs-5' id='strike-points-1'>-</span> / <span class='fs-5' id='strike-points-2'>-</span> / <span class='fs-5' id='strike-points-3'>-</span>
                                    </i>
                                </div>
                            </div>
                        </div>

                    </div>
                    
                </div>

                <!-- WELCOME AREA -->
                <div class='container-fluid rounded-3 bg-warning p-2 mt-1 mb-0 fill-screen-scrollable' id='welcome-area'>
                    <div class='container mx-auto mb-0'>
                        <h1 class='fell text-info type-shadow text-center mt-1'>Welcome to the FORCE CREATOR</h1>
                        <h2 class='fell text-info type-shadow text-center'>for Blood & Plunder by Firelock Games</h2>
                        <hr class='border border-secondary border-3 rounded-2 opacity-100'>
                        <div class='row'>
                            <div class='col mx-1 my-0 pt-1 bg-info rounded-2 text-secondary fell'>
                                <h3 class='h3 text-primary text-center'>Alpha Version Disclaimer</h3>
                                <ul>
                                    <li>This website has not yet been optimized for mobile. For best results view in a window at least 1024 pixels wide.</li>
                                    <li>While in alpha release user accounts and force list saves should not be considered permanent, although they may persist through to beta release and beyond. I will make note here on the front page of any change in the database that will require you to make a new user account.</li>
                                </ul>
                                <h3 class='h3 text-primary text-center'>How Do?</h3>
                                <p>
                                    After selecting your Nation, Faction, and Commander (above) you will be able to add more elements to your list. You can also set your Force Name and the Max Points for your Force List in the area above.
                                </p>
                                <h3 class='h3 text-primary text-center'>Changelog</h3>
                                Click on date for details.
                                <ul>
                                    <li>
                                        <a href='#mar15-2023-2' role='button' data-bs-toggle='collapse'><span>Mar 15, 2023 (Second Update)</span></a>
                                        <ul class='collapse' id='mar15-2023-2'>
                                            <li>Characters (other than Praying Indian) now disappear/reappear from the component menu when added to/removed from Force List.</li>
                                            <li>A few small fixes including one that was affecting save files and their unique identifier.</li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href='#mar15-2023' role='button' data-bs-toggle='collapse'><span>Mar 15, 2023</span></a>
                                        <ul class='collapse' id='mar15-2023'>
                                            <li>Added Model Count and Strike Point Thresholds.</li>
                                            <li>Moved current points (x / Total) to top of page.</li>
                                            <li>Updated menu at top of page to be more mobile friendly.</li>
                                        </ul>
                                    </li>
                                </ul>
                                <h3 class='h3 text-primary text-center'>Known Bugs</h3>
                                <ul>
                                    <li>Opening a link for a saved Force List into a new tab or window does not work properly.</li>
                                    <li>Clicking too fast on expander icons gets them out of sync.</li>
                                    <li>Some commanders that shouldn't have the Horse option do.</li>
                                </ul>
                                <h3 class='h3 text-primary text-center'>Planned Features For Beta Launch</h3>
                                <ul>
                                    <li>Feedback Form.</li>
                                    <li>Make fully responsive to work well on any size screen.</li>
                                    <li>Pre-Formatted PDF Force List downloads.</li>
                                    <li>Assignment functionality (units and artillery to ship decks, units to artillery, characters and commanders to units). Great Warrior's Unit Option will be implemented along with this.</li>
                                    <li>Make Piragua and Corvette work without multiple versions (requires additional Ship Upgrade functionality).</li>
                                </ul>
                                <h3 class='h3 text-primary text-center'>Additional Planned Features/Changes</h3>
                                <ul>
                                    <li>Add warnings when force list breaks rules.</li>
                                    <li>Include official structure and terrain options.</li>
                                    <li>Removal x's for entire groups of components (Core Units, Ships, etc) in the build area.</li>
                                    <li>Theme Change Functionality.</li>
                                    <li>Functionality for characters that affect commander options (either require or prohibit certain commanders).</li>
                                    <li>Make build-side interior expanders default to open.</li>
                                </ul>
                            </div>
                            <div class='col-12-sm col-lg mx-1 my-0 pt-1 bg-info rounded-2 text-secondary fell'>
                                <h3 class='h3 text-primary text-center'>New Features</h3>
                                <p>
                                    For those familiar with Force Builder, here are some changes and new features to look out for:
                                </p>
                                <h4 class='h4 text-primary text-center'>Programmed Limitations</h4>
                                    <ul>
                                        <li>Only valid Artillery, Character, and Ship choices are displayed. (Some further refinement may be needed to account for Characters that require Ships of a certain size).</li>
                                        <li>Prevents adding more than one of the same Character (other than Praying Indian) to a Force List.</li>
                                        <li>The two Ship Upgrades that can change Ship stats permanently (Streamlined Hull and Improved Rig) change the displayed/stored values for those characteristics (Draft and Speed)</li>
                                    </ul>
                                <h4 class='h4 text-primary text-center'>Options</h4>
                                    <ul>
                                        <li>Force Options are mutually exclusive.</li>
                                        <li>Standard Commanders have selectable Special Rules. User must self-limit selections.</li>
                                        <li>The two Ship Upgrades that can change Ship stats permanently (Streamlined Hull and Improved Rig) change the the corresponding Ship characteristics (Draft and Speed).</li>
                                    </ul>
                                <h4 class='h4 text-primary text-center'>“Nicknames”</h4>
                                    <ul>
                                        <li>After adding a qualifying component to your Force List just click on the component's name and change it to whatever you want!</li>
                                        <li>Available to all Characters, Ships, Units, and Artillery Groups. Also available to all generic type (not Historic or Legenadary) Commanders.</li>
                                    </ul>
                                    <h4 class='h4 text-primary text-center'>Misc</h4>
                                    <ul>
                                        <li>Artillery can be added as multiple groups (or individuals) of the same type. This allows for assigning the same type of Artillery to more than one Unit.</li>
                                        <li>Language for Faction Special Rules that give a bonus to the roll to determine attacker has been standardized to the RtB version. Card suit names have been standardized to use the appropriate card suit symbol.</li>
                                        <li>There are numerous behind the scenes data and data structure changes and additions that will allow for more and better functionality in the future.</li>
                                    </ul>
                            </div>
                        </div>
                        
                    </div>
                </div>

                <!-- CREATION AREA -->
                <div class='collapse container-fluid m-0' id='build-area'>
                    <div class='row'>

                        <!-- BUILD SIDE -->
                        <div class='col mt-1 mb-0 ms-0 me-0 pt-2 overflow-y-scroll rounded-3 bg-warning' id='build-side' data-list-save='{{ data }}'>
                            
                            <div class='fill-screen-scrollable'>
                                <div class='rounded-2 force-selector-field border border-2 border-secondary'>
                                    <div class='row text-center'>
                                        <div class='col-auto'>
                                            <div class='container-fluid d-flex justify-content-center'>
                                                <a href='#fl-options' role='button' data-bs-toggle='collapse'>
                                                    <i class='fa-solid fa-chevron-down' id='fl-options-expand'></i>
                                                </a>
                                            </div>
                                        </div>
                                        <div class='col'>
                                            <i id='force-name' class='fs-5'></i>
                                        </div>
                                    </div>
                                    <div class='collapse text-primry rounded-2 mt-0 px-1 text-primary' id='fl-options'>
                                        <a href='#/' role='button'><i class="fa-solid fa-clock-rotate-left mx-2" id='force-revert'></i></a>
                                        <a href='#/' role='button'><i class="fa-solid fa-floppy-disk mx-2" id='force-save'></i></a>
                                        <i class="fa-solid fa-file-arrow-down mx-2" id='force-download'></i>
                                    </div>
                                </div>

                                <div id='force-info'>
                                    <div class='collapse card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-faction'></div>
                                    <div class='collapse card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-commander'></div>
                                    <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-core-units'></div>
                                    <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-support-units'></div>
                                    <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-fighting-characters'></div>
                                    <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-civilian-characters'></div>
                                    <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-ships'></div>
                                    <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-artillery'></div>
                                    <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-misc'></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- MENU SIDE -->
                        <div class='col-12-sm col-lg order-lg-first mt-1 mb-0 me-2 ms-0 pt-2 pb-2 rounded-3 bg-warning'>
                            
                            <div class='row p-0'>
                                <div class='col mx-0'>
                                    <form>
                                        {{add_to_list.component_selector(class_='form-control rounded-2 text-center force-selector-field pt-0 pb-0 border border-2 border-secondary')}}
                                    </form>
                                </div>
                                <div class='col-sm-auto mx-0 ps-0 d-flex flex-row-reverse'>
                                    <button class='btn btn-primary border border-info py-0 px-1 text-info fell' id='add-custom-button'>+ Custom</button>
                                </div>
                            </div>

                            <div class='container rounded-2 text-center text-info fs-4 fell' id='component-instructions'>
                                Please selection a Faction and Commander.
                            </div>
                            <div class='fill-screen-scrollable' id='menu'>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        <!-- </div>
    </div> -->

    <!-- FOOTER -->
    <!-- <div class='container-fluid bg-primary sticky-bottom mb-0' id='footer'>
        <div class='container p-0 pt-1 mb-0 bg-secondary border border-2 border-top-0 border-bottom-0 border-info text-info'>
            <div class='container-fluid border border-5 border-top-0 border-start-0 border-end-0 border-secondary bg-warning m-0'>
                &nbsp;
            </div>
        </div>
    </div> -->

{% endblock content %}

{% block scripts %}    
<script src="{{url_for('static', filename='assets/js/force_creator.js')}}"></script>      
{% endblock scripts %}