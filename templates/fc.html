{% extends 'base.html' %}

{% block title %}
    Force Creator
{% endblock title %}

{% block content %}
    
    <!-- HEADER -->
    <div class='container-fluid border border-5 border-start-0 border-end-0 border-secondary bg-warning'>
        <h1 class='main_header m-1 text-center'>
            <i>B&P Force Creator</i>
        </h1>
    </div>

    <div class='container p-0 px-1 m-0'>
        
        <!-- MAIN SELECT  -->
        <div class='container-fluid rounded-3 bg-warning p-0 fell bigger-text'>

            <div class='row px-3'>
                
                <!-- MAIN SELECT RIGHT SIDE -->
                <div class='col-12-sm col-md order-md-last m-1'>      

                    <div class='row mt-1 align-items-center'>
                        <div class='col-auto p-0 pe-2 text-end'>
                            <i class='form-label text-info'>Nation:</i>
                        </div>
                        <div class='col p-0'>
                            <select class='form-control rounded-2 text-center pt-0 pb-0 border bg-info border-2 border-secondary text-primary' id='select_nation'></select>
                        </div>
                    </div>
                                    
                    <div class='row mt-1 align-items-center'>
                        <div class='col-auto p-0 pe-2 text-end'>
                            <i class='form-label text-info'>Faction:</i>
                        </div>
                        <div class='col p-0'>
                            <select class='form-control rounded-2 text-center pt-0 pb-0 bg-info border border-2 border-secondary text-primary' id='select_faction'></select>
                        </div>
                    </div>

                    <div class='row mt-1 align-items-center'>
                        <div class='col-auto p-0 pe-2 text-end'>
                            <i class='form-label text-info'>Commander:</i>
                        </div>
                        <div class='col p-0'>
                            <select class='form-control rounded-2 text-center pt-0 pb-0 bg-info border border-2 border-secondary text-primary' id='select_commander'></select>
                        </div>
                    </div>
                </div>                        

                <!-- MAIN SELECT LEFT SIDE -->
                <div class='col m-1'>
                    <!-- FORCE NAME -->
                    <div class='row mt-1 align-items-center'>
                        <div class='col-auto p-0 pe-2 text-end'>
                            <i class='form-label text-info'>Force Name:</i>
                        </div>
                        <div class='col p-0'>
                            <input type='text' placeholder='Name Your Force' maxlength='30' class='form-control rounded-2 text-center pt-0 pb-0 bg-info border border-2 border-secondary text-primary' id='force_name'>
                        </div>
                    </div>
                    <!-- MAX POINTS -->
                    <div class='row align-items-center'>
                        <div class='col-auto mt-1 p-0 pe-2 text-end'>
                            <i class='form-label text-info'>Max Points:</i>
                        </div>
                        <div class='col-3 col-1-sm mt-1 p-0'>
                            <input type='number' value=150 class='form-control rounded-2 text-center pt-0 pb-0 bg-info border border-2 border-secondary text-primary' id='point_max'>
                        </div>
                        <div class='col-auto mt-2'>
                            <span class='p-1 border border-primary rounded-2 text-info normal-text'>
                                <i>Points: </i>
                                <span class='bigger-text' id='point-total-display'>0</span>
                                /
                                <span class='bigger-text' id='point-max-display'>150</span>
                            </span>
                        </div>
                        <div class='col-auto mt-2'>
                            <i  class='p-1 border border-primary rounded-2 text-info normal-text'>
                                Models in Force: <span class='bigger-text' id='model-count'>0</span>
                            </i>
                        </div>                           
                        <div class='col-auto mt-2'>
                            <span  class='p-1 border border-primary rounded-2 text-info normal-text' id='unit-size-range-display'>
                                <!-- filled by js -->
                            </span>
                        </div>                                             
                        <div class='col-auto mt-2'>
                            <i  class='p-1 border border-primary rounded-2 text-info normal-text'>
                                Strike Points at <span class='bigger-text' id='strike-points-1'>0</span> / <span class='bigger-text' id='strike-points-2'>0</span> / <span class='bigger-text' id='strike-points-3'>0</span> Casualties
                            </i>
                        </div>
                    </div>
                </div>

            </div>
            
        </div>

        <!-- WELCOME AREA -->
        <div class='container-fluid rounded-3 bg-warning p-2 mt-1 mb-0 overflow-y-scroll vh-75 min-vh-50 vh-md-80 min-vh-md-80' id='welcome-area'>
            <div class='container mb-0'>
                <div class='row'>
                    <div class='col m-1 mb-0 pt-1 bg-info rounded-2 text-secondary fell'>
                        <h3 class='h3 text-primary text-center'>Create Your Force</h3>
                        <h5 class='h5 text-primary text-center mt-3 mb-0'>Step 1: <span class='text-secondary'>Name your Force and set Maximum Points.</span></h5>
                        <img src="{{url_for('static', filename='assets/images/step1.jpg')}}" class='rounded-1 border border-2 border-primary my-1 img-fluid'>
                        <!-- <hr class='border border-1 border-primary opacity-100 rounded-2 mx-5'> -->
                        <h5 class='h5 text-primary text-center mt-4 mb-0'>Step 2: <span class='text-secondary'>Select Nation, Faction, and Commander.</span></h5>
                        <img src="{{url_for('static', filename='assets/images/step2.jpg')}}" class='rounded-1 border border-2 border-primary my-1 img-fluid'>
                        <!-- <hr class='border border-1 border-primary opacity-100 rounded-2 mx-5'> -->
                        <h5 class='h5 text-primary text-center mt-4 mb-0'>Step 3: <span class='text-secondary'>Add Components to Force List.</span></h5>
                        <img src="{{url_for('static', filename='assets/images/step3.jpg')}}" class='rounded-1 border border-2 border-primary my-1 img-fluid'>
                        <!-- <hr class='border border-1 border-primary opacity-100 rounded-2 mx-5'> -->
                        <h5 class='h5 text-primary text-center mt-4 mb-0'>Step 4: <span class='text-secondary'>Modify your Components by changing qty, selecting options, etc.</span></h5>
                        <img src="{{url_for('static', filename='assets/images/step4.jpg')}}" class='rounded-1 border border-2 border-primary my-1 img-fluid'>
                        <!-- <hr class='border border-1 border-primary opacity-100 rounded-2 mx-5'> -->
                        <h5 class='h5 text-primary text-center mt-4 mb-0'>Step 5: <span class='text-secondary'>Save your list or download as PDF (PDF functionality coming soon). Revert becomes available after saving and will reload the saved List discarding any unsaved changes.</span></h5>
                        <img src="{{url_for('static', filename='assets/images/step5.jpg')}}" class='rounded-1 border border-2 border-primary my-1 img-fluid'>
                    </div>
                    <div class='col-12-sm col-lg m-1 mb-0 pt-1 bg-info rounded-2 text-secondary fell'>
                        <h4 class='h4 text-primary text-center'>Alpha Release Disclaimer</h4>
                        <ul>
                            <li>While in alpha release user accounts and force list saves should not be considered permanent, although they may persist through to beta release and beyond. I will make note here on the front page of any change in the database that will require you to make a new user account.</li>
                            <li>The database was last reset on <span class='bigger-text text-primary'>March 16, 2023</span>.<br>
                                Any accounts or saved lists created before this time will need to be recreated.</li>
                        </ul>
                        <hr class='border border-1 border-primary opacity-100 rounded-2 mx-3'>
                        <h4 class='h4 text-primary text-center'>Alpha Release Changelog</h4>
                        <ul>
                            <li>
                                <a href='#mar22-2023' role='button' data-bs-toggle='collapse'><span>March 22, 2023</span></a>
                                <ul class='collapse' id='mar22-2023'>
                                    <li>Updated Home Screen with graphic instructions for creating a new Force List.</li>
                                    <li>Moved Save, Revert, and PDF buttons outside of their expander, which was removed, and inline with Force Name.</li>
                                </ul>
                            </li>   
                            <li>
                                <a href='#mar18-2023' role='button' data-bs-toggle='collapse'><span>March 18, 2023</span></a>
                                <ul class='collapse' id='mar18-2023'>
                                    <li>Improvements to layout and responsiveness. The site should be pretty mobile-friendly now, but feedback is welcomed.</li>
                                </ul>
                            </li>                            
                            <li>
                                <a href='#mar16-2023' role='button' data-bs-toggle='collapse'><span>March 16, 2023</span></a>
                                <ul class='collapse' id='mar16-2023'>
                                    <li>There is now only one version of the Piragua with a functional Light Gunboat upgrade.</li>
                                    <li>Navbar menu now collapsable for mobile / small windows.</li>
                                    <li>Removed Horse Option from Commanders that should not have it.</li>
                                    <li>Small updates to UI for User Pages.</li>
                                </ul>
                            </li>
                            <li>
                                <a href='#mar15-2023-2' role='button' data-bs-toggle='collapse'><span>March 15, 2023 (Second Update)</span></a>
                                <ul class='collapse' id='mar15-2023-2'>
                                    <li>Characters (other than Praying Indian) now disappear/reappear from the component menu when added to/removed from Force List.</li>
                                    <li>A few small fixes including one that was affecting save files and their unique identifier.</li>
                                </ul>
                            </li>
                            <li>
                                <a href='#mar15-2023' role='button' data-bs-toggle='collapse'><span>March 15, 2023</span></a>
                                <ul class='collapse' id='mar15-2023'>
                                    <li>Added Model Count and Strike Point Thresholds.</li>
                                    <li>Moved current points (x / Total) to top of page.</li>
                                    <li>Updated menu at top of page to be more mobile friendly.</li>
                                </ul>
                            </li>
                        </ul>
                        <hr class='border border-1 border-primary opacity-100 rounded-2 mx-3'>
                        <h4 class='h4 text-primary text-center'>Known Bugs</h4>
                        <ul>
                            <li>Opening a link for a saved Force List into a new tab or window does not work properly.</li>
                            <li>Clicking too fast on expander icons gets them out of sync.</li>
                        </ul>
                        <hr class='border border-1 border-primary opacity-100 rounded-2 mx-3'>
                        <h4 class='h4 text-primary text-center'>Planned Features For Beta Release</h4>
                        <ul>
                            <li>Feedback Form.</li>
                            <li>Pre-Formatted PDF Force List downloads.</li>
                            <li>Assignment functionality (units and artillery to ship decks, units to artillery, characters and commanders to units). Great Warrior's Unit Option will be implemented along with this.</li>
                            <li>Add Bow/Musket option for FotF Native Commanders.</li>
                            <li>Make the Corvette a single ship variation with an upgrade option?</li>
                        </ul>
                        <hr class='border border-1 border-primary opacity-100 rounded-2 mx-3'>
                        <h4 class='h4 text-primary text-center'>Additional Planned Features / Changes</h4>
                        <ul>
                            <li>Add warnings when force list breaks rules.</li>
                            <li>Include official structure and terrain options.</li>
                            <li>Removal x's for entire groups of components (Core Units, Ships, etc) in the build area.</li>
                            <li>Theme Change Functionality.</li>
                            <li>Functionality for characters that affect commander options (either require or prohibit certain commanders).</li>
                            <li>Make build-side interior expanders default to open.</li>
                        </ul>
                    </div>
                </div>
                
            </div>
        </div>

        <!-- CREATION AREA -->
        <div class='collapse container-fluid overflow-y-scroll m-0 vh-50 min-vh-50 vh-md-80 min-vh-md-80' id='build-area'>
            <div class='row h-100'>

                <!-- BUILD SIDE -->
                <div class='col mt-1 mb-0 ms-0 me-0 pt-2 pb-1 rounded-3 bg-warning' id='build-side' data-list-save='{{ data }}'>
                    
                    <div class='rounded-2 force-selector-field border border-2 border-secondary'>
                        <div class='row text-center align-items-center'>
                            <div class='col-auto' id='force-revert'>
                                <a href='#/' role='button'><i class="fa-solid fa-clock-rotate-left"></i></a>
                            </div>                         
                            <div class='col'>
                                <i id='force-name' class='biggest-text'></i>
                            </div>
                            <div class='col-auto' id='force-save'>
                                <a href='#/' role='button'><i class="fa-solid fa-floppy-disk"></i></a>
                            </div>
                            <div class='col-auto me-1' id='force-download'>
                                <i class="fa-solid fa-file-arrow-down"></i>
                            </div>   
                        </div>
                    </div>

                    <div id='force-info'>
                        <div class='collapse card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-faction'></div>
                        <div class='collapse card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-commander'></div>
                        <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-core-units'></div>
                        <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-support-units'></div>
                        <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-fighting-characters'></div>
                        <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-civilian-characters'></div>
                        <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-ships'></div>
                        <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-artillery'></div>
                        <div class='card m-1 p-1 border border-2 border-secondary rounded-2 bg-info' id='force-misc'></div>
                    </div>
                </div>
                
                <!-- MENU SIDE -->
                <div class='col-12-sm col-lg order-lg-first mt-1 mb-0 me-2 ms-0 pt-2 pb-2 rounded-3 bg-warning'>
                    
                    <div class='row p-0'>
                        <div class='col mx-0'>
                            <form>
                                {{add_to_list.component_selector(class_='form-control rounded-2 text-center force-selector-field pt-0 pb-0 border border-2 border-secondary')}}
                            </form>
                        </div>
                        <div class='col-auto mx-0 ps-0 d-flex flex-row-reverse'>
                            <button class='btn btn-primary border border-info py-0 px-1 text-info fell' id='add-custom-button'>+ Custom</button>
                        </div>
                    </div>

                    <div class='container rounded-2 text-center text-info bigger-text fell' id='component-instructions'>
                        Please select a Faction and Commander.
                    </div>
                    <div class='' id='menu'>
                    </div>
                </div>

            </div>
        </div>

    </div>


    <!-- FOOTER -->
    <!-- <div class='container-fluid bg-primary sticky-bottom mb-0' id='footer'>
        <div class='container p-0 pt-1 mb-0 bg-secondary border border-2 border-top-0 border-bottom-0 border-info text-info'>
            <div class='container-fluid border border-5 border-top-0 border-start-0 border-end-0 border-secondary bg-warning m-0'>
                &nbsp;
            </div>
        </div>
    </div> -->

{% endblock content %}

{% block scripts %}    
<script src="{{url_for('static', filename='assets/js/force_creator.js')}}"></script>      
{% endblock scripts %}